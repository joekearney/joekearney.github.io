{% comment %}
Set the following variables to use this include:
  tag - the tag whose posts to index
  title
  [description]
  [include_sub_header] - name of a file to include as a sub header, relative to the post
  [orderAscending] - to make the posts appear chronologically (default is most recent first)
  [showDrafts] - default false

{% endcomment %}

{% if include.showDrafts %}
  {% assign hideDrafts = false %}
{% else %}
  {% assign hideDrafts = true %}
{% endif %}

{% unless include.listing-only %}
<div class="container">
  <section class="content">
    <div class="row"><div class="col-md-12">
      <div class="title">
        <h1 class="title-colour"><a href="{{ page.url }}">{{ include.title }}</a></h1>
        {% if include.description %}
          <p>{{ include.description }}.</p>
        {% endif %}
      </div>

      {% if include.include_sub_header %}
        {% include {{ include.include_sub_header }} %}
      {% endif %}

{% endunless %}
{% unless include.header-only %}

      <ul class="listing">
        {% if include.orderAscending %}
          {% assign orderedPosts = site.posts | reverse %}
        {% else %}
          {% assign orderedPosts = site.posts %}
        {% endif %}

        {% for post in orderedPosts %}
          {% unless post.tags contains 'draft' and hideDrafts %}
            {% unless post.tags contains 'landing' %}
              {% if post.categories contains 'post' and post.tags contains include.tag %}
                  <li>
                    {% if post.tags contains 'new' %}<span class="post-description">[NEW]</span>{% endif %}
                    <span class="post-date">{{ post.date | date: "%B %e, %Y" }}</span>
                    {% if post.tags contains 'draft' %}<span class="post-description">[Draft]</span>{% endif %}
                    <a href="{{ post.url }}">{{ post.title | replace:'-','&ndash;' }}</a>
                    {% if post.description %}
                      {% unless post.description == "" %}
                        <span class="post-description">&ndash; {{ post.description }}</span>
                      {% endunless %}
                    {% endif %}
                    <span class="post-author"> &ndash; {{ post.author }}</span>
                  </li>
              {% endif %}
            {% endunless %}
          {% endunless %}
        {% endfor %}
      </ul>

      {% if include.include_footer %}
        {% include {{ include.include_footer }} %}
      {% endif %}

    </div></div>
  </section>
</div>
{% endunless %}
